app:
  name: "candlepilot"
  # Cron runs every minute; lock prevents overlaps.
  lock_key: "lock:cron"
  lock_ttl_seconds: 55

redis:
  # Use Render env var REDIS_URL (Upstash TCP/TLS often starts with rediss://)
  url_env: "rediss://default:AZxQAAIncDE4NzYxM2Y1OTllNjA0YmQ3OGZlMmMwMzhjZGIwYTMzNnAxNDAwMTY@ideal-zebra-40016.upstash.io:6379"

discord:
  webhook_url_env: "https://discord.com/api/webhooks/1452030981182849086/fybhwkHm2Rnv216adRl6xHSVpwiPVRy3VdOSYHJq92eTbKcuGVY6hldYfSQjpOAnl2qj"
  username: "Signal Bot"
  avatar_url: ""

mexc:
  # If your existing client already handles auth, you can ignore these env vars.
  api_key_env: "MEXC_KEY"
  api_secret_env: "MEXC_SECRET"

market:
  exchange: "mexc"
  market_type: "perp"      # we run swaps/perps via CCXT defaultType=swap
  timeframes:
    - "15m"
    - "1h"

universe:
  enable: true
  quote: "USDT"

  # CCXT swap symbols often look like BTC/USDT:USDT. Keep this true for perps.
  require_colon_quote: true

  # Universe selection
  top_n: 200
  min_quote_volume_usdt: 3000000
  refresh_seconds: 3600

  # Safety filters (optional)
  whitelist: []     # if set, only scan these
  blacklist: []     # always excluded

  # Scan sharding (HIGHLY recommended on cron)
  shard:
    enable: true
    symbols_per_run: 60
    state_key: "universe_shard_index:mexc:perp"
    # advance by this many symbols each cron tick
    step: 60

strategy:
  name: "trend_pullback_v1"
  min_confidence: 0.65

  ema_fast: 20
  ema_trend: 200
  atr_period: 14

  stop_atr_mult: 2.5
  tp1_r: 1.5
  tp2_r: 3.0
  trail_atr_mult: 2.5
  trail_activate_after_tp1: true

  candles_limit: 300

publishing:
  published_ttl_days: 7
  # Optional: stop Discord spam in very active markets
  cooldown_candles: 3
